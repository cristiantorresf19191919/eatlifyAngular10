{"ast":null,"code":"import { COMMA, ENTER } from '@angular/cdk/keycodes';\nimport { FormControl } from '@angular/forms';\nimport { of, Subject } from 'rxjs';\nimport { map, startWith, takeUntil } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/servicios/productos.service\";\nimport * as i2 from \"@angular/material/snack-bar\";\nconst _c0 = [\"fruitInput\"];\nconst _c1 = [\"auto\"];\n\nfunction NewModifierComponent_mat_chip_10_mat_icon_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"mat-icon\", 28);\n    i0.ɵɵlistener(\"click\", function NewModifierComponent_mat_chip_10_mat_icon_2_Template_mat_icon_click_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return ctx_r8.remove();\n    });\n    i0.ɵɵtext(1, \"cancel\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction NewModifierComponent_mat_chip_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-chip\");\n    i0.ɵɵtext(1);\n    i0.ɵɵtemplate(2, NewModifierComponent_mat_chip_10_mat_icon_2_Template, 2, 0, \"mat-icon\", 27);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.itemSelected.name, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.removable);\n  }\n}\n\nfunction NewModifierComponent_mat_option_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r10 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", item_r10);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r10.name, \" \");\n  }\n}\n\nfunction NewModifierComponent_button_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function NewModifierComponent_button_20_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.addItemGroup();\n    });\n    i0.ɵɵtext(1, \" Add \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction NewModifierComponent_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 30);\n    i0.ɵɵelementStart(1, \"div\", 31);\n    i0.ɵɵelementStart(2, \"mat-icon\");\n    i0.ɵɵtext(3, \"keyboard_arrow_right\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"mat-card\", 32);\n    i0.ɵɵelementStart(5, \"div\", 33);\n    i0.ɵɵelementStart(6, \"div\", 34);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 35);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 36);\n    i0.ɵɵelementStart(11, \"div\", 37);\n    i0.ɵɵtext(12, \"$ \");\n    i0.ɵɵelement(13, \"input\", 38);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"div\", 39);\n    i0.ɵɵelementStart(15, \"mat-icon\", 40);\n    i0.ɵɵtext(16, \"more_vert\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"mat-menu\", null, 41);\n    i0.ɵɵelementStart(19, \"button\", 42);\n    i0.ɵɵlistener(\"click\", function NewModifierComponent_div_22_Template_button_click_19_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r16);\n      const item_r13 = restoredCtx.$implicit;\n      const ctx_r15 = i0.ɵɵnextContext();\n      return ctx_r15.deleteModifier(item_r13);\n    });\n    i0.ɵɵtext(20, \"Delete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"button\", 43);\n    i0.ɵɵtext(22, \"Other Action\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r13 = ctx.$implicit;\n\n    const _r14 = i0.ɵɵreference(18);\n\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\" \", item_r13.name, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Found in \", item_r13.category, \"\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"matMenuTriggerFor\", _r14);\n  }\n}\n\nconst _c2 = function () {\n  return {\n    openPopup: true\n  };\n};\n\nexport let NewModifierComponent = /*#__PURE__*/(() => {\n  class NewModifierComponent {\n    constructor(productsService, _snackBar) {\n      this.productsService = productsService;\n      this._snackBar = _snackBar;\n      this.visible = true;\n      this.selectable = true;\n      this.removable = true;\n      this.onDestroySubscriber$ = new Subject();\n      this.separatorKeysCodes = [ENTER, COMMA];\n      this.fruitCtrl = new FormControl();\n      this.addOnsProducts = [];\n      this.groupItems = [];\n      this.allFruits = ['Apple', 'Lemon', 'Lime', 'Orange', 'Strawberry'];\n      this.showSideBar = false;\n      this.filteredItems = this.fruitCtrl.valueChanges.pipe(startWith(null), map(inputTyping => inputTyping ? this._filter(inputTyping) : this.addOnsProducts.slice()));\n    }\n\n    ngOnInit() {\n      this.productsService.getAddonsProducts().pipe(takeUntil(this.onDestroySubscriber$)).subscribe(data => {\n        this.addOnsProducts = data;\n        this.addOnsNames = this.addOnsProducts.map(item => item.name);\n      });\n    }\n\n    ngOnDestroy() {\n      //Called once, before the instance is destroyed.\n      //Add 'implements OnDestroy' to the class.\n      this.onDestroySubscriber$.next();\n    }\n\n    _filter(value) {\n      const filterValue = value.toLowerCase();\n      return this.addOnsProducts.filter(item => item.name.toLowerCase().indexOf(filterValue) === 0);\n    }\n\n    autoLoadOnClick() {\n      // list to observable\n      this.filteredItems = of(this.addOnsProducts);\n    }\n\n    add(event) {\n      const input = event.input;\n      const value = event.value; // Add our fruit\n\n      if ((value || '').trim()) {// this.fruits.push(value.trim());\n      } // Reset the input value\n\n\n      if (input) {\n        input.value = '';\n      }\n\n      this.fruitCtrl.setValue(null);\n    }\n\n    remove() {\n      this.itemSelected = null;\n    }\n\n    selected(event) {\n      // this.fruits.push(event.option.viewValue);\n      if (event.option.value['openPopup']) {\n        this.showSideBar = true;\n        return;\n      }\n\n      this.itemSelected = event.option.value;\n      this.fruitInput.nativeElement.value = '';\n      this.fruitCtrl.setValue(null);\n      this.onSelectedItem = true;\n    }\n\n    addItemGroup() {\n      const repeated = this.groupItems.find(item => item._id == this.itemSelected._id);\n\n      if (repeated) {\n        this._snackBar.open(\"Item Duplicated\", \"Ok\", {\n          duration: 1000\n        });\n\n        return;\n      }\n\n      this.groupItems.push(this.itemSelected);\n      this.itemSelected = null;\n    }\n\n    closeSideBar() {\n      this.showSideBar = false;\n    }\n\n    deleteModifier(item) {\n      const elmentFound = this.groupItems.find(el => el._id == item._id);\n      const index = this.groupItems.indexOf(elmentFound);\n      this.groupItems.splice(index, 1);\n    }\n\n  }\n\n  NewModifierComponent.ɵfac = function NewModifierComponent_Factory(t) {\n    return new (t || NewModifierComponent)(i0.ɵɵdirectiveInject(i1.ProductosService), i0.ɵɵdirectiveInject(i2.MatSnackBar));\n  };\n\n  NewModifierComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: NewModifierComponent,\n    selectors: [[\"app-new-modifier\"]],\n    viewQuery: function NewModifierComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n        i0.ɵɵviewQuery(_c1, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.fruitInput = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.matAutocomplete = _t.first);\n      }\n    },\n    decls: 43,\n    vars: 13,\n    consts: [[1, \"newModifierComponent\"], [1, \"top-right\"], [\"mat-raised-button\", \"\", \"color\", \"primary\"], [1, \"p-3\"], [\"type\", \"text\", \"placeholder\", \"name\", 1, \"modifier-name\"], [1, \"padding\", \"p-3\"], [1, \"example-chip-list\"], [\"aria-label\", \"Fruit selection\"], [\"chipList\", \"\"], [4, \"ngIf\"], [\"placeholder\", \"New Addon...\", 3, \"formControl\", \"matAutocomplete\", \"matChipInputFor\", \"matChipInputSeparatorKeyCodes\", \"click\", \"matChipInputTokenEnd\"], [\"fruitInput\", \"\"], [3, \"optionSelected\"], [\"auto\", \"matAutocomplete\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [\"mat-button\", \"\", \"color\", \"primary\"], [\"class\", \"mx-3\", \"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\", 4, \"ngIf\"], [1, \"mx-auto\", \"w-80\", \"p-5\", \"group-item-container\"], [\"class\", \"group-item\", 4, \"ngFor\", \"ngForOf\"], [1, \"my-5\"], [1, \"rules\", \"my-2\"], [1, \"h3\"], [1, \"rules__form\", \"p-3\"], [1, \"flex-form-1\"], [\"type\", \"text\", 1, \"rules__form__input\"], [3, \"showSideBar\", \"closeSideBar\"], [\"matChipRemove\", \"\", 3, \"click\", 4, \"ngIf\"], [\"matChipRemove\", \"\", 3, \"click\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 1, \"mx-3\", 3, \"click\"], [1, \"group-item\"], [1, \"d-flex\", \"w-100\", \"align-items-center\"], [1, \"w-100\", \"d-flex\", \"justify-content-between\"], [1, \"left\"], [1, \"title\", \"h3\"], [1, \"subtitle\"], [1, \"right\", \"d-flex\", \"align-items-center\"], [1, \"price\"], [\"type\", \"text\", 1, \"price_input\"], [1, \"icon\"], [3, \"matMenuTriggerFor\"], [\"menu\", \"matMenu\"], [\"mat-menu-item\", \"\", 3, \"click\"], [\"mat-menu-item\", \"\"]],\n    template: function NewModifierComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"button\", 2);\n        i0.ɵɵtext(3, \"Save\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\", 3);\n        i0.ɵɵelement(5, \"input\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"section\", 5);\n        i0.ɵɵelementStart(7, \"mat-form-field\", 6);\n        i0.ɵɵelementStart(8, \"mat-chip-list\", 7, 8);\n        i0.ɵɵtemplate(10, NewModifierComponent_mat_chip_10_Template, 3, 2, \"mat-chip\", 9);\n        i0.ɵɵelementStart(11, \"input\", 10, 11);\n        i0.ɵɵlistener(\"click\", function NewModifierComponent_Template_input_click_11_listener() {\n          return ctx.autoLoadOnClick();\n        })(\"matChipInputTokenEnd\", function NewModifierComponent_Template_input_matChipInputTokenEnd_11_listener($event) {\n          return ctx.add($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"mat-autocomplete\", 12, 13);\n        i0.ɵɵlistener(\"optionSelected\", function NewModifierComponent_Template_mat_autocomplete_optionSelected_13_listener($event) {\n          return ctx.selected($event);\n        });\n        i0.ɵɵtemplate(15, NewModifierComponent_mat_option_15_Template, 2, 2, \"mat-option\", 14);\n        i0.ɵɵpipe(16, \"async\");\n        i0.ɵɵelementStart(17, \"mat-option\", 15);\n        i0.ɵɵelementStart(18, \"a\", 16);\n        i0.ɵɵtext(19, \"Create New\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(20, NewModifierComponent_button_20_Template, 2, 0, \"button\", 17);\n        i0.ɵɵelementStart(21, \"div\", 18);\n        i0.ɵɵtemplate(22, NewModifierComponent_div_22_Template, 23, 3, \"div\", 19);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(23, \"mat-divider\", 20);\n        i0.ɵɵelementStart(24, \"section\", 21);\n        i0.ɵɵelementStart(25, \"p\", 22);\n        i0.ɵɵelementStart(26, \"b\");\n        i0.ɵɵtext(27, \"Rules\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"p\");\n        i0.ɵɵtext(29, \" Set rules to control how customers select items in this modifier group \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"div\", 23);\n        i0.ɵɵelementStart(31, \"mat-card\");\n        i0.ɵɵelementStart(32, \"mat-checkbox\");\n        i0.ɵɵtext(33, \"Require Customers to select an Item?\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(34, \"div\", 24);\n        i0.ɵɵelementStart(35, \"p\");\n        i0.ɵɵtext(36, \"What's the maximum amount of items customers can select? \\u00A0 \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(37, \"input\", 25);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(38, \"div\", 24);\n        i0.ɵɵelementStart(39, \"p\");\n        i0.ɵɵtext(40, \"How many times can customers select any single item?\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(41, \"input\", 25);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(42, \"app-new-addon-item\", 26);\n        i0.ɵɵlistener(\"closeSideBar\", function NewModifierComponent_Template_app_new_addon_item_closeSideBar_42_listener() {\n          return ctx.closeSideBar();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        const _r0 = i0.ɵɵreference(9);\n\n        const _r3 = i0.ɵɵreference(14);\n\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngIf\", ctx.itemSelected);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"formControl\", ctx.fruitCtrl)(\"matAutocomplete\", _r3)(\"matChipInputFor\", _r0)(\"matChipInputSeparatorKeyCodes\", ctx.separatorKeysCodes);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(16, 10, ctx.filteredItems));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"value\", i0.ɵɵpureFunction0(12, _c2));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.onSelectedItem);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.groupItems);\n        i0.ɵɵadvance(20);\n        i0.ɵɵproperty(\"showSideBar\", ctx.showSideBar);\n      }\n    },\n    styles: [\".newModifierComponent[_ngcontent-%COMP%]{padding:1rem;width:100%;height:85vh;position:relative;width:calc(100% - 23rem);margin-left:auto}mat-form-field.mat-form-field[_ngcontent-%COMP%]{font-size:12px}.modifier-name[_ngcontent-%COMP%]{width:100%;color:#fff;background:#303030;outline:none;border:none;border-bottom:1px solid white;font-size:40px}.modifier-name[_ngcontent-%COMP%]:focus{border-bottom-color:#2d88ff}.example-chip-list[_ngcontent-%COMP%]{width:100%}@media (min-width: 450px){.example-chip-list[_ngcontent-%COMP%]{width:35%;text-align:left;margin:2% 0}}.group-item-container[_ngcontent-%COMP%]{box-shadow:10px 10px 20px #222222a2,-10px -10px 20px #3e3e3ea4}.group-item-container[_ngcontent-%COMP%]   .group-item[_ngcontent-%COMP%]{margin:1% 0}.price[_ngcontent-%COMP%]{font-size:14px;font-weight:700}.price[_ngcontent-%COMP%]   .price_input[_ngcontent-%COMP%]{width:4rem;padding:4px;background:#303030;color:#fff;margin:0 5px;border:none;font-weight:700;outline:none}.rules[_ngcontent-%COMP%]{font-size:16px}.rules__form__input[_ngcontent-%COMP%]{background-color:#292929;height:100%;color:#fff;border:none;outline:none;padding:9px;font-size:20px;width:25%}\"]\n  });\n  return NewModifierComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}