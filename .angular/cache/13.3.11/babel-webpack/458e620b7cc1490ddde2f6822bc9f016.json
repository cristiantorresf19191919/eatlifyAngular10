{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { catchError, delay, exhaustMap, takeUntil } from 'rxjs/operators';\nimport { Item } from 'src/app/models/item';\nimport Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/servicios/categorias.service\";\nimport * as i2 from \"src/app/servicios/delivery.service\";\nimport * as i3 from \"src/app/servicios/productos.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/material/button\";\nimport * as i6 from \"@angular/material/icon\";\nimport * as i7 from \"@angular/forms\";\nimport * as i8 from \"@angular/material/slide-toggle\";\nimport * as i9 from \"@angular/material/select\";\nimport * as i10 from \"@angular/material/core\";\n\nconst _c0 = function (a0, a1) {\n  return {\n    \"opacity\": a0,\n    \"vissibility\": a1\n  };\n};\n\nfunction NewAddonItemComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 27);\n    i0.ɵɵlistener(\"click\", function NewAddonItemComponent_div_0_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.close();\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction2(1, _c0, ctx_r0.showSideBarBoolean ? 1 : 0, ctx_r0.showSideBarBoolean ? \"visible\" : \"hidden\"));\n  }\n}\n\nfunction NewAddonItemComponent_label_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"label\", 28);\n    i0.ɵɵtext(1, \" Browse File \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction NewAddonItemComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 29);\n    i0.ɵɵelement(1, \"img\", 30);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r3.imgUrl, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction NewAddonItemComponent_mat_select_45_mat_option_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 33);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r8 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", item_r8.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r8.name, \" \");\n  }\n}\n\nfunction NewAddonItemComponent_mat_select_45_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"mat-select\", 31);\n    i0.ɵɵlistener(\"ngModelChange\", function NewAddonItemComponent_mat_select_45_Template_mat_select_ngModelChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return ctx_r9.product.category = $event;\n    });\n    i0.ɵɵtemplate(1, NewAddonItemComponent_mat_select_45_mat_option_1_Template, 2, 2, \"mat-option\", 32);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngModel\", ctx_r4.product.category);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.categories);\n  }\n}\n\nconst _c1 = function (a0, a1) {\n  return {\n    \"transform\": a0,\n    \"opacity\": a1\n  };\n};\n\nexport let NewAddonItemComponent = /*#__PURE__*/(() => {\n  class NewAddonItemComponent {\n    constructor(categoryService, deliveryService, productsService) {\n      this.categoryService = categoryService;\n      this.deliveryService = deliveryService;\n      this.productsService = productsService;\n      this.onClose = false;\n      this.showSideBarBoolean = false;\n      this.categories = [];\n      this.product = new Item();\n      this.ondestroy$ = new Subject();\n      this.closeSideBar = new EventEmitter();\n      this.showSideBarBoolean = this.showSideBar;\n    }\n\n    ngOnChanges(changes) {\n      for (const PropName in changes) {\n        const changeProp = changes[PropName];\n        const to = JSON.stringify(changeProp.currentValue);\n        console.log('testing');\n        console.log(changes['showSideBar']);\n        this.showSideBarBoolean = changeProp.currentValue;\n      }\n    }\n\n    close() {\n      this.onClose = !this.onClose;\n      this.showSideBarBoolean = false;\n      this.closeSideBar.emit();\n    }\n\n    ngOnInit() {\n      this.loadCategories();\n    }\n\n    loadCategories() {\n      this.categoryService.getCategories().pipe(takeUntil(this.ondestroy$)).subscribe(res => {\n        this.categories = res;\n      });\n    }\n\n    registrar() {\n      // TODO\n      let obs = this.productsService.addProduct(this.product).pipe(delay(2000), takeUntil(this.ondestroy$), exhaustMap(item => this.deliveryService.SubirFoto(this.selectedImage, item._id).pipe(delay(3000), catchError(err => {\n        console.log('error');\n        throw err;\n      }))));\n      obs.subscribe(_ => {\n        Swal.fire('exito', `el producto ${this.product.name} se ha agregado con exito`, 'success');\n        this.resetForm();\n      }, error => {\n        Swal.fire('error', `${this.product.name} > ${error.message} `, 'warning');\n        console.log(error);\n      });\n    }\n\n    onFileSelected(imageInput) {\n      const file = imageInput.files[0];\n      /* cargue instantaneamente la imagen que sube del input */\n\n      const fileReader = new FileReader();\n      fileReader.readAsDataURL(file);\n\n      fileReader.onload = _event => {\n        // la imagen que refresca en la vista\n        this.imgUrl = fileReader.result;\n      };\n      /* para reutilizarla en cuando de salvar al boton y hacer el post */\n\n\n      this.selectedImage = imageInput.files[0];\n      console.log('imageInput.value');\n      console.log(imageInput.value);\n    }\n\n    ngOnDestroy() {\n      this.ondestroy$.next();\n      this.ondestroy$.complete();\n    }\n\n    resetForm() {\n      this.imgUrl = null;\n      this.product = new Item();\n    }\n\n    removePicture() {\n      this.imgUrl = null;\n      this.showSideBarBoolean = false;\n    }\n\n  }\n\n  NewAddonItemComponent.ɵfac = function NewAddonItemComponent_Factory(t) {\n    return new (t || NewAddonItemComponent)(i0.ɵɵdirectiveInject(i1.CategoriasService), i0.ɵɵdirectiveInject(i2.DeliveryService), i0.ɵɵdirectiveInject(i3.ProductosService));\n  };\n\n  NewAddonItemComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: NewAddonItemComponent,\n    selectors: [[\"app-new-addon-item\"]],\n    inputs: {\n      showSideBar: \"showSideBar\"\n    },\n    outputs: {\n      closeSideBar: \"closeSideBar\"\n    },\n    features: [i0.ɵɵNgOnChangesFeature],\n    decls: 57,\n    vars: 12,\n    consts: [[\"class\", \"background-black\", 3, \"ngStyle\", \"click\", 4, \"ngIf\"], [\"id\", \"uploadPicInput\", \"type\", \"file\", \"placeholder\", \"suba\", 2, \"display\", \"none\", 3, \"change\"], [\"imageInput\", \"\"], [1, \"side-bar-product\", 3, \"ngStyle\"], [1, \"top-right\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\"], [1, \"side-bar-product__close-icon\", 3, \"click\"], [1, \"header\"], [\"type\", \"text\", \"placeholder\", \"name\", 1, \"input-title\", 3, \"ngModel\", \"ngModelChange\"], [1, \"lead\", \"px-2\"], [1, \"picture-container\", \"p-3\"], [1, \"picture-container__photo\"], [\"for\", \"uploadPicInput\", \"class\", \"label-pic\", 4, \"ngIf\"], [\"class\", \"picture-container\", 4, \"ngIf\"], [1, \"picture-container__photo-info\"], [1, \"action-buttons\"], [\"mat-raised-button\", \"\"], [\"mat-raised-button\", \"\", 3, \"click\"], [1, \"description\", \"p-3\"], [\"name\", \"\", \"id\", \"\", \"cols\", \"50\", \"rows\", \"50\", \"placeholder\", \"Enter Description...\", 1, \"description__input\", 3, \"ngModel\", \"ngModelChange\"], [1, \"price\", \"p-3\", \"flex-1\"], [\"type\", \"text\", \"placeholder\", \"price\", 1, \"price__input\", 3, \"ngModel\", \"ngModelChange\"], [1, \"category\", \"p-3\", \"flex-1\"], [\"placeholder\", \"Select Category\", \"name\", \"item\", 3, \"ngModel\", \"ngModelChange\", 4, \"ngIf\"], [1, \"addOnProduct\", \"p-3\", \"flex-1\"], [3, \"ngModel\", \"ngModelChange\"], [1, \"addOnProduct__info\"], [1, \"background-black\", 3, \"ngStyle\", \"click\"], [\"for\", \"uploadPicInput\", 1, \"label-pic\"], [1, \"picture-container\"], [\"alt\", \"\", 1, \"picture-container__picture\", 3, \"src\"], [\"placeholder\", \"Select Category\", \"name\", \"item\", 3, \"ngModel\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"]],\n    template: function NewAddonItemComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r11 = i0.ɵɵgetCurrentView();\n\n        i0.ɵɵtemplate(0, NewAddonItemComponent_div_0_Template, 1, 4, \"div\", 0);\n        i0.ɵɵelementStart(1, \"input\", 1, 2);\n        i0.ɵɵlistener(\"change\", function NewAddonItemComponent_Template_input_change_1_listener() {\n          i0.ɵɵrestoreView(_r11);\n\n          const _r1 = i0.ɵɵreference(2);\n\n          return ctx.onFileSelected(_r1);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelementStart(4, \"div\", 4);\n        i0.ɵɵelementStart(5, \"button\", 5);\n        i0.ɵɵlistener(\"click\", function NewAddonItemComponent_Template_button_click_5_listener() {\n          return ctx.registrar();\n        });\n        i0.ɵɵtext(6, \"Save\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"mat-icon\", 6);\n        i0.ɵɵlistener(\"click\", function NewAddonItemComponent_Template_mat_icon_click_7_listener() {\n          return ctx.close();\n        });\n        i0.ɵɵtext(8, \"close\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 7);\n        i0.ɵɵelementStart(10, \"input\", 8);\n        i0.ɵɵlistener(\"ngModelChange\", function NewAddonItemComponent_Template_input_ngModelChange_10_listener($event) {\n          return ctx.product.name = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"p\", 9);\n        i0.ɵɵtext(12, \"photo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"section\", 10);\n        i0.ɵɵelementStart(14, \"div\", 11);\n        i0.ɵɵtemplate(15, NewAddonItemComponent_label_15_Template, 2, 0, \"label\", 12);\n        i0.ɵɵtemplate(16, NewAddonItemComponent_div_16_Template, 2, 1, \"div\", 13);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"div\", 14);\n        i0.ɵɵelementStart(18, \"div\");\n        i0.ɵɵelementStart(19, \"p\", 9);\n        i0.ɵɵelementStart(20, \"b\");\n        i0.ɵɵtext(21, \"Photos help customer decide what to order and can increase sales\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"p\");\n        i0.ɵɵtext(23, \"File requirements: JPG, PNG\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"div\", 15);\n        i0.ɵɵelementStart(25, \"button\", 16);\n        i0.ɵɵtext(26, \"Add Photo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"button\", 16);\n        i0.ɵɵtext(28, \"Download\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"button\", 17);\n        i0.ɵɵlistener(\"click\", function NewAddonItemComponent_Template_button_click_29_listener() {\n          return ctx.removePicture();\n        });\n        i0.ɵɵtext(30, \"Remove\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"p\", 9);\n        i0.ɵɵtext(32, \"Description (Optional)\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(33, \"section\", 18);\n        i0.ɵɵelementStart(34, \"textarea\", 19);\n        i0.ɵɵlistener(\"ngModelChange\", function NewAddonItemComponent_Template_textarea_ngModelChange_34_listener($event) {\n          return ctx.product.description = $event;\n        });\n        i0.ɵɵtext(35, \"   \\n       \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(36, \"p\", 9);\n        i0.ɵɵtext(37, \"Default Price\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(38, \"section\", 20);\n        i0.ɵɵelementStart(39, \"div\");\n        i0.ɵɵtext(40, \"$\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(41, \"input\", 21);\n        i0.ɵɵlistener(\"ngModelChange\", function NewAddonItemComponent_Template_input_ngModelChange_41_listener($event) {\n          return ctx.product.price = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(42, \"p\", 9);\n        i0.ɵɵtext(43, \"Category\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(44, \"section\", 22);\n        i0.ɵɵtemplate(45, NewAddonItemComponent_mat_select_45_Template, 2, 2, \"mat-select\", 23);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(46, \"p\", 9);\n        i0.ɵɵtext(47, \"Add-on Product\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(48, \"section\", 24);\n        i0.ɵɵelementStart(49, \"div\");\n        i0.ɵɵelementStart(50, \"mat-slide-toggle\", 25);\n        i0.ɵɵlistener(\"ngModelChange\", function NewAddonItemComponent_Template_mat_slide_toggle_ngModelChange_50_listener($event) {\n          return ctx.product.addonProduct = $event;\n        });\n        i0.ɵɵtext(51, \"AddOn Product?\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(52, \"div\", 26);\n        i0.ɵɵelementStart(53, \"p\");\n        i0.ɵɵelementStart(54, \"mat-icon\");\n        i0.ɵɵtext(55, \"help\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(56, \" Check this whether you later want this product as an addon to other products. Addon products won't be visible to the App \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.showSideBarBoolean);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction2(9, _c1, ctx.showSideBarBoolean ? \"translateX(0)\" : \"translateX(70rem)\", ctx.showSideBarBoolean ? 1 : 0));\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngModel\", ctx.product.name);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", !ctx.imgUrl);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.imgUrl);\n        i0.ɵɵadvance(18);\n        i0.ɵɵproperty(\"ngModel\", ctx.product.description);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngModel\", ctx.product.price);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.categories);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.product.addonProduct);\n      }\n    },\n    directives: [i4.NgIf, i4.NgStyle, i5.MatButton, i6.MatIcon, i7.DefaultValueAccessor, i7.NgControlStatus, i7.NgModel, i8.MatSlideToggle, i9.MatSelect, i4.NgForOf, i10.MatOption],\n    styles: [\".background-black[_ngcontent-%COMP%]{background:#000000b9;position:fixed;inset:0;transition:all .5s ease}.side-bar-product[_ngcontent-%COMP%]{position:fixed;width:70rem;height:100vh;background:#303030;z-index:99;top:0;color:#fff;right:0;transform:translate(50rem);opacity:0;transition:all .5s cubic-bezier(.25,1,.5,1);overflow:auto}.side-bar-product__close-icon[_ngcontent-%COMP%]{transition:all,3s;font-size:28px;transform:scale(1);cursor:pointer}.side-bar-product__close-icon[_ngcontent-%COMP%]:hover, .side-bar-product__close-icon[_ngcontent-%COMP%]:active{color:#2d88ff;transform:scale(1.1)}.side-bar-product[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{border-bottom:1px solid #2d88ff;padding:7px}.side-bar-product[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:#303030;height:100%;color:#fff;border:none;outline:none;padding:9px;font-size:34px;width:100%}.side-bar-product[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:18px}.side-bar-product[_ngcontent-%COMP%]   .price__input[_ngcontent-%COMP%]{display:inline;background-color:#292929;height:100%;color:#fff;border:none;outline:none;padding:9px;font-size:18px;width:25%}.side-bar-product[_ngcontent-%COMP%]   .picture-container[_ngcontent-%COMP%]{display:flex}.side-bar-product[_ngcontent-%COMP%]   .picture-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin:2%}.side-bar-product[_ngcontent-%COMP%]   .picture-container__photo[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;visibility:hidden;display:none}.side-bar-product[_ngcontent-%COMP%]   .picture-container__photo[_ngcontent-%COMP%]   .label-pic[_ngcontent-%COMP%]{border:2px dashed #2d88ff;width:24rem;height:12rem;display:flex;justify-content:center;align-items:center;font-size:22px}.side-bar-product[_ngcontent-%COMP%]   .picture-container__photo-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.side-bar-product[_ngcontent-%COMP%]   .picture-container__photo-info[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;margin-left:2%;justify-content:space-around}.side-bar-product[_ngcontent-%COMP%]   .description__input[_ngcontent-%COMP%]{overflow:auto;resize:vertical;background:#292929;color:#fff;border:none;outline:none;font-size:19px;width:100%;height:6rem}.side-bar-product[_ngcontent-%COMP%]   .description__input[_ngcontent-%COMP%]::placeholder{color:#fff}.side-bar-product[_ngcontent-%COMP%]   .addOnProduct__info[_ngcontent-%COMP%]{font-size:15px;margin-left:5%;box-shadow:10px 10px 20px #222222a2,-10px -10px 20px #3e3e3ea4;padding:10px;width:100%}.picture-container[_ngcontent-%COMP%]{width:100%;border-radius:20%}.picture-container__picture[_ngcontent-%COMP%]{border-radius:4%;height:16rem;width:29rem;padding:4px;max-width:42rem;max-height:23rem}\"]\n  });\n  return NewAddonItemComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}