{"ast":null,"code":"import { bounceInDownOnEnterAnimation, fadeInDownOnEnterAnimation, bounceOutUpOnLeaveAnimation } from 'angular-animations';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./ventas-socket.service\";\nimport * as i2 from \"@angular/common\";\n\nfunction VentasSocketComponent_div_4_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6);\n    i0.ɵɵelementStart(1, \"div\");\n    i0.ɵɵelementStart(2, \"h1\", 10);\n    i0.ɵɵelement(3, \"i\", 11);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\");\n    i0.ɵɵelementStart(6, \"h1\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\");\n    i0.ɵɵelementStart(9, \"h1\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const venta_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"@bounceOutUpOnLeave\", undefined)(\"@bounceInDownOnEnter\", undefined);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", venta_r3.name, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", venta_r3.quantity, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", venta_r3.price, \" \");\n  }\n}\n\nfunction VentasSocketComponent_div_4_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵelementStart(1, \"h1\");\n    i0.ɵɵtext(2, \"TOTAL\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"h1\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"@fadeInDownOnEnter\", undefined);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r2.totalSummaryPrice);\n  }\n}\n\nfunction VentasSocketComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵelementStart(1, \"div\", 6);\n    i0.ɵɵelementStart(2, \"h1\", 7);\n    i0.ɵɵtext(3, \"Nombre\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"h1\", 7);\n    i0.ɵɵtext(5, \"Cantidad\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"h1\", 7);\n    i0.ɵɵtext(7, \"Precio\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(8, VentasSocketComponent_div_4_div_8_Template, 11, 5, \"div\", 8);\n    i0.ɵɵtemplate(9, VentasSocketComponent_div_4_div_9_Template, 5, 2, \"div\", 9);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.arregloVentas);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.arregloVentas.length > 1);\n  }\n}\n\nexport let VentasSocketComponent = /*#__PURE__*/(() => {\n  class VentasSocketComponent {\n    constructor(ventasSocketService) {\n      this.ventasSocketService = ventasSocketService;\n      this.arregloVentas = [];\n      this.totalSummaryPrice = 0;\n    }\n\n    ngOnInit() {\n      /* join a room */\n      this.ventasSocketService.joinRoom();\n      /* cargando los audios  */\n\n      let audio = new Audio();\n      let clearAudio = new Audio();\n      clearAudio.src = '../../../assets/audio/clear.mp3';\n      audio.src = \"../../../assets/audio/cash.mp3\";\n      clearAudio.load();\n      audio.load();\n      this._ventaDeletedSubscriptor = this.ventasSocketService.deletedVenta.subscribe(itemDeleted => {\n        console.log(itemDeleted);\n        let index = this.arregloVentas.indexOf(itemDeleted);\n        this.arregloVentas.splice(index, 1);\n        this.totalSummaryPrice = 0;\n        this.arregloVentas.map(items => {\n          this.totalSummaryPrice += items.price;\n        });\n        this._clearTheScreenSubscriptio = this.ventasSocketService.clearTheScreenProp.subscribe(data => {\n          if (data) {\n            this.arregloVentas = [];\n            this.totalSummaryPrice = 0;\n            clearAudio.play();\n          }\n        });\n      });\n      /* let audio:any = document.getElementById(\"cashAudio\"); */\n\n      this._ventaSubscriptor = this.ventasSocketService.venta.subscribe(venta => {\n        this.arregloVentas.push(venta);\n        console.log(venta);\n        this.totalSummaryPrice = 0;\n        this.arregloVentas.map(item => this.totalSummaryPrice += item.price);\n        audio.play();\n      });\n    }\n\n    ngOnDestroy() {\n      if (this._ventaDeletedSubscriptor && this._ventaSubscriptor) {\n        this._ventaSubscriptor.unsubscribe();\n\n        this._ventaDeletedSubscriptor.unsubscribe();\n      }\n    }\n\n  }\n\n  VentasSocketComponent.ɵfac = function VentasSocketComponent_Factory(t) {\n    return new (t || VentasSocketComponent)(i0.ɵɵdirectiveInject(i1.VentasSocketService));\n  };\n\n  VentasSocketComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: VentasSocketComponent,\n    selectors: [[\"app-ventas-socket\"]],\n    decls: 9,\n    vars: 1,\n    consts: [[2, \"color\", \"#2d88ff\", \"font-size\", \"30px\", \"margin\", \"0 auto\", \"text-align\", \"center\"], [\"class\", \"parent\", 4, \"ngIf\"], [\"id\", \"cashAudio\"], [\"src\", \"./assets/audio/cash.ogg\", \"type\", \"audio/ogg\"], [\"src\", \"./assets/audio/cash.mp3\", \"type\", \"audio/mpeg\"], [1, \"parent\"], [1, \"parent-grid-each-element\"], [2, \"display\", \"block\"], [\"class\", \"parent-grid-each-element\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"summary\", 4, \"ngIf\"], [1, \"ventasName\"], [1, \"pi\", \"pi-check\", 2, \"color\", \"green\"], [1, \"summary\"]],\n    template: function VentasSocketComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"p\");\n        i0.ɵɵtext(1, \"ventas-socket works!\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"h1\", 0);\n        i0.ɵɵtext(3, \"MODULO VENTAS SOCKET EN CONSTRUCCION\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(4, VentasSocketComponent_div_4_Template, 10, 2, \"div\", 1);\n        i0.ɵɵelementStart(5, \"audio\", 2);\n        i0.ɵɵelement(6, \"source\", 3);\n        i0.ɵɵelement(7, \"source\", 4);\n        i0.ɵɵtext(8, \" Your browser does not support the audio element.\\n\");\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.arregloVentas);\n      }\n    },\n    directives: [i2.NgIf, i2.NgForOf],\n    styles: [\".parent[_ngcontent-%COMP%]{border:2px solid white;height:50rem;width:90%;background-image:linear-gradient(to top,#cfd9dfe5 0%,#e2ebf0ef 100%);color:#000;display:flex;flex-direction:column;align-items:center;padding:2rem;border-radius:3rem;box-shadow:5px 2px 3px #333;z-index:90;margin:0 auto}.parent-grid-each-element[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-gap:5rem;width:100%;margin-bottom:2rem;margin:0 auto;text-align:center}.parent-grid-each-element[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{border-right:2px solid #444}.summary[_ngcontent-%COMP%]{justify-self:flex-end;display:flex;justify-content:space-between;width:73%;margin-top:5%;border-bottom:1px solid #333}@media (max-width: 1030px){.ventasName[_ngcontent-%COMP%]{max-height:32px;overflow:hidden;text-align:left}}\"],\n    data: {\n      animation: [bounceInDownOnEnterAnimation(), fadeInDownOnEnterAnimation(), bounceOutUpOnLeaveAnimation()]\n    }\n  });\n  return VentasSocketComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}