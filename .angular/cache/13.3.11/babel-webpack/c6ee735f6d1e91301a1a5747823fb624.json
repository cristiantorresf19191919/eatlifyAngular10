{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { bounceOutUpOnLeaveAnimation } from 'angular-animations';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/servicios/ventas-jorunal.service\";\nimport * as i2 from \"../ventas-socket/ventas-socket.service\";\nimport * as i3 from \"src/app/servicios/preventas.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"primeng/button\";\n\nconst _c0 = function (a0) {\n  return {\n    \"animated slideInLeft\": a0\n  };\n};\n\nfunction JournalComponentComponent_div_3_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵelementStart(1, \"p\", 11);\n    i0.ɵɵlistener(\"click\", function JournalComponentComponent_div_3_div_1_Template_p_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const item_r3 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext(2);\n      return ctx_r4.onItemClickEvent(item_r3);\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\", 12);\n    i0.ɵɵelementStart(4, \"b\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function JournalComponentComponent_div_3_div_1_Template_button_click_6_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const item_r3 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return ctx_r6.addElement(item_r3);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function JournalComponentComponent_div_3_div_1_Template_button_click_7_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const item_r3 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return ctx_r7.DeleteElement(item_r3);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(5, _c0, item_r3))(\"@bounceOutUpOnLeave\", undefined);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", item_r3.quantity, \" \", item_r3.name, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"$\", item_r3.price, \"\");\n  }\n}\n\nfunction JournalComponentComponent_div_3_h1_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h1\", 7);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Change \", ctx_r2.change, \"\");\n  }\n}\n\nfunction JournalComponentComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵtemplate(1, JournalComponentComponent_div_3_div_1_Template, 8, 7, \"div\", 6);\n    i0.ɵɵelement(2, \"hr\");\n    i0.ɵɵelementStart(3, \"h1\", 7);\n    i0.ɵɵtext(4, \"total \");\n    i0.ɵɵelementStart(5, \"b\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"input\", 8);\n    i0.ɵɵlistener(\"change\", function JournalComponentComponent_div_3_Template_input_change_7_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.onChangeQuantity($event);\n    })(\"input\", function JournalComponentComponent_div_3_Template_input_input_7_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.onChangeQuantity($event);\n    })(\"keydown\", function JournalComponentComponent_div_3_Template_input_keydown_7_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.onChangeQuantity($event);\n    })(\"keyup\", function JournalComponentComponent_div_3_Template_input_keyup_7_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return ctx_r12.onChangeQuantity($event);\n    })(\"ngModelChange\", function JournalComponentComponent_div_3_Template_input_ngModelChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.moneyRecieved = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(8, JournalComponentComponent_div_3_h1_8_Template, 2, 1, \"h1\", 9);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.allItems);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r0.totalPrice);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.moneyRecieved);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.change);\n  }\n}\n\nexport let JournalComponentComponent = /*#__PURE__*/(() => {\n  class JournalComponentComponent {\n    constructor(ventasJournalService, ventasSocketService, preventasService) {\n      this.ventasJournalService = ventasJournalService;\n      this.ventasSocketService = ventasSocketService;\n      this.preventasService = preventasService;\n      this.deleteItemEvent = new EventEmitter();\n      this.addItemEvent = new EventEmitter();\n      this.closeComponentEvent = new EventEmitter();\n      this.productSelectedPopUp = new EventEmitter();\n      this.newSoldDATA = new EventEmitter();\n      this.allItems = [];\n      this.totalPrice = 0;\n      this.moneyRecieved = 0;\n      this.change = 0;\n      this.deleteItemAnimation = false;\n    }\n\n    ngOnInit() {\n      this.ventasJournalService.getItemUpdated().subscribe(item => {\n        const currentItem = this.allItems.find(el => el._id === item._id);\n        const currentItemIndex = this.allItems.indexOf(currentItem);\n        this.allItems.splice(currentItemIndex, 1);\n        this.allItems.unshift(item);\n        this.totalPrice = 0;\n        this.allItems.forEach(el => this.totalPrice += el.price);\n      });\n      this.ventasJournalService.getItem().subscribe(el => {\n        this.totalPrice += el.price;\n        this.ventasSocketService.sendSale(el);\n        this.allItems.push(el);\n        console.log('que estoy reciviendo');\n        console.log(el);\n        this.change = this.valorRecivido - this.totalPrice;\n      });\n    }\n\n    ngOnChange() {\n      /*     this.allItems.push(this.itemObject);\n      alert(this.itemObject); */\n    }\n\n    ngOnChanges(changes) {\n      /*     console.log(\"ngOnChanges(changes: SimpleChanges)\");\n      console.log(\"ngOnChanges(changes: SimpleChanges)\");\n      console.log(\"ngOnChanges(changes: SimpleChanges)\");\n      console.log(changes.itemObject.currentValue);\n      console.log(changes.itemObject.firstChange); */\n      // You can also use categoryId.previousValue and\n      // categoryId.firstChange for comparing old and new values\n\n      /* this.allItems.push(changes.itemObject.currentValue); */\n    }\n\n    botaunstring(numero) {\n      return String(numero);\n    }\n\n    onChangeQuantity(event) {\n      this.change = this.valorRecivido - this.totalPrice;\n\n      if (event.keyCode == 9) {\n        //tab pressed\n        this.valorRecivido = parseFloat(event.target.value);\n        this.change = this.valorRecivido - this.totalPrice;\n      }\n\n      if (event.target.value) {\n        this.valorRecivido = parseFloat(event.target.value);\n        this.change = this.valorRecivido - this.totalPrice;\n      }\n\n      if (event.keyCode == '38') {\n        // flecha arriba\n        this.valorRecivido = parseFloat(event.target.value);\n        this.change = this.valorRecivido - this.totalPrice;\n      } else if (event.keyCode == '40') {\n        // flecha abajo\n        this.valorRecivido = parseFloat(event.target.value);\n        this.change = this.valorRecivido - this.totalPrice;\n      } else {}\n    }\n\n    calculateTotal() {\n      this.totalPrice = 0;\n      this.allItems.map(item => {\n        this.totalPrice += item.price;\n      });\n      this.change = this.valorRecivido - this.totalPrice;\n    }\n\n    DeleteElement(element) {\n      console.log(this.allItems);\n      const index = this.allItems.indexOf(element);\n      this.allItems.splice(index, 1);\n      this.calculateTotal();\n      this.deleteItemEvent.emit(element);\n    }\n\n    addElement(element) {\n      this.addItemEvent.emit(element);\n      this.calculateTotal();\n    }\n\n    closeComponentTrigger() {\n      this.closeComponentEvent.emit(true);\n    }\n    /* Limpiar la data */\n\n\n    cleanData() {\n      const obj = {\n        arreglo_ventas: this.allItems\n      };\n      this.preventasService.agregarVenta(obj).subscribe(preventaCollection => {\n        this.newSoldDATA.emit(preventaCollection);\n      });\n      this.allItems = [];\n      this.totalPrice = 0;\n      this.change = 0;\n      this.valorRecivido = 0;\n      this.ventasSocketService.clearTheScreen(true);\n    }\n\n    onItemClickEvent(item) {\n      this.productSelectedPopUp.emit(item);\n    }\n\n  }\n\n  JournalComponentComponent.ɵfac = function JournalComponentComponent_Factory(t) {\n    return new (t || JournalComponentComponent)(i0.ɵɵdirectiveInject(i1.VentasJorunalService), i0.ɵɵdirectiveInject(i2.VentasSocketService), i0.ɵɵdirectiveInject(i3.PreventasService));\n  };\n\n  JournalComponentComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: JournalComponentComponent,\n    selectors: [[\"app-journal-component\"]],\n    inputs: {\n      itemObject: \"itemObject\",\n      elements: \"elements\"\n    },\n    outputs: {\n      deleteItemEvent: \"deleteItemEvent\",\n      addItemEvent: \"addItemEvent\",\n      closeComponentEvent: \"closeComponentEvent\",\n      productSelectedPopUp: \"productSelectedPopUp\",\n      newSoldDATA: \"newSoldDATA\"\n    },\n    features: [i0.ɵɵNgOnChangesFeature],\n    decls: 7,\n    vars: 1,\n    consts: [[2, \"display\", \"flex\", \"justify-content\", \"flex-end\", \"width\", \"100%\", \"margin-top\", \"-4rem\", \"margin-right\", \"-6rem\"], [1, \"title\"], [\"style\", \"width: 100%;\", 4, \"ngIf\"], [1, \"cleanBtnContainer\"], [1, \"cleanBtn\", 3, \"click\"], [2, \"width\", \"100%\"], [\"class\", \"item-container\", 3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [1, \"title-feedback\"], [\"type\", \"number\", \"placeholder\", \"change\", \"autofocus\", \"\", 1, \"input-received\", 3, \"ngModel\", \"change\", \"input\", \"keydown\", \"keyup\", \"ngModelChange\"], [\"class\", \"title-feedback\", 4, \"ngIf\"], [1, \"item-container\", 3, \"ngClass\"], [1, \"item-element\", 3, \"click\"], [1, \"item-element\"], [\"pButton\", \"\", \"type\", \"button\", \"icon\", \"pi pi-plus\", 1, \"addItemButton\", 3, \"click\"], [\"pButton\", \"\", \"type\", \"button\", \"icon\", \"pi pi-times\", 1, \"deleteItemButton\", 3, \"click\"]],\n    template: function JournalComponentComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"h1\", 1);\n        i0.ɵɵtext(2, \"Journal Component\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(3, JournalComponentComponent_div_3_Template, 9, 4, \"div\", 2);\n        i0.ɵɵelementStart(4, \"div\", 3);\n        i0.ɵɵelementStart(5, \"button\", 4);\n        i0.ɵɵlistener(\"click\", function JournalComponentComponent_Template_button_click_5_listener() {\n          return ctx.cleanData();\n        });\n        i0.ɵɵtext(6, \"Ready\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.allItems.length > 0);\n      }\n    },\n    directives: [i4.NgIf, i4.NgForOf, i5.NumberValueAccessor, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgModel, i4.NgClass, i6.ButtonDirective],\n    styles: [\".item-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.item-container[_ngcontent-%COMP%]   .item-element[_ngcontent-%COMP%]{font-size:2rem;white-space:nowrap;max-width:158px;overflow:hidden}.input-received[_ngcontent-%COMP%]{padding:1rem;font-size:3rem;align-items:center;text-align:center;border-radius:1rem;border:none;box-shadow:2px 2px 5px #777;background:radial-gradient(#303030,#2e3f2e);color:#3f51b5;width:27rem}.deleteItemButton[_ngcontent-%COMP%]{border-radius:5rem;font-size:14px;background:red;border:none;transition:all .2s}.deleteItemButton[_ngcontent-%COMP%]:active{transform:scale(2)}.addItemButton[_ngcontent-%COMP%]{border-radius:5rem;font-size:14px;background:green;margin:0 3px;border:none;transition:all .2s}.addItemButton[_ngcontent-%COMP%]:active{transform:scale(2)}.close-button-container[_ngcontent-%COMP%]{cursor:pointer;padding:1rem}.close-button-container[_ngcontent-%COMP%]   .closeButton[_ngcontent-%COMP%]{font-size:4rem}.cleanBtnContainer[_ngcontent-%COMP%]{display:flex;justify-content:center}.cleanBtn[_ngcontent-%COMP%]{font-size:18px;border:none;padding:1rem;text-decoration:none;text-transform:uppercase;position:relative;border-radius:18px;background:#333;color:#fff;transition:all .3s}.cleanBtn[_ngcontent-%COMP%]:after{content:\\\"\\\";width:100%;height:100%;border-radius:10rem;position:absolute;background:#333;top:0;left:0;z-index:-1;transition:all .2s}.cleanBtn[_ngcontent-%COMP%]:active{background-color:#00f}.cleanBtn[_ngcontent-%COMP%]:active:after{transform:scaleX(1.5) scaleY(2.2);opacity:0}.openJournalComponent[_ngcontent-%COMP%]{display:inline-block;transform:translate3d(63rem,33rem,21px)!important}@media screen and (max-width: 390px){.title[_ngcontent-%COMP%]{font-size:1rem;margin-top:19%}.close-button-container[_ngcontent-%COMP%]{padding:0rem!important;position:relative!important}.closeButton[_ngcontent-%COMP%]{font-size:2rem!important;position:absolute!important;top:2rem!important;left:-1rem!important}.cleanBtn[_ngcontent-%COMP%]{font-size:10px;padding:6px}.item-element[_ngcontent-%COMP%]{font-size:1rem!important}.addItemButton[_ngcontent-%COMP%], .deleteItemButton[_ngcontent-%COMP%]{font-size:.5rem!important}.title-feedback[_ngcontent-%COMP%], .input-received[_ngcontent-%COMP%]{font-size:1.5rem!important}.input-received[_ngcontent-%COMP%]{padding:0rem!important;width:13rem!important}}\"],\n    data: {\n      animation: [bounceOutUpOnLeaveAnimation({\n        duration: 400\n      })]\n    }\n  });\n  return JournalComponentComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}